(ns smeghead\schema\type\object
  (:require smeghead\schema\interfaces :refer [schema RuleInterface]))

(defstruct rule-object [key valid message]
  RuleInterface
  (valid [this target] ((this :valid) target))
  (message [this] (this :message)))

(defn object []
  (schema [(rule-object :required_error (fn [x] (not (empty? x))) "Required")
           (rule-object :invalid_type_error hash-map? "Invalid type")]))

